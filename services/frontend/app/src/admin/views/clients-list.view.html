<div ng-app="jupiter.admin"
     ng-controller="ClientsController as ctrl"
     ng-init="ctrl.getClients()">
 <section>
  <h1>Клиенты</h1>

  <table class="row-offset-0 table table-bordered text-large"
         align="center">
    <tr>
      <th width="28%">Имя</th>
      <th width="20%">Личный номер</th>
      <th width="20%">Номер паспорта</th>
      <th width="12%">Статус</th>
      <th width="10%"></th>
    </tr>
    <tr>
      <th>
        <input type="text"
               class="form-control"
               ng-model="ctrl.filterParams.name"
               ng-keypress="ctrl.updateFilterParams($event.keyCode)">
      </th>
      <th>
        <input type="text"
               class="form-control"
               ng-model="ctrl.filterParams.in"
               ng-keypress="ctrl.updateFilterParams($event.keyCode)">
      </th>
      <th class="text-center">
        <input type="text"
               class="form-control"
               ng-model="ctrl.filterParams.pn"
               ng-keypress="ctrl.updateFilterParams($event.keyCode)">
      </th>
      <th class="text-center">
        <div class="dropdown">
          <select class="form-control"
                  ng-model="ctrl.filterParams.state"
                  ng-change="ctrl.updateFilterParams(13)">
            <option></option>
            <option value="True">Активен</option>
            <option value="False">Отключен</option>
          </select>
        </div>
      </th>
      <th></th>
    </tr>
    <tr ng-repeat="client in ctrl.data">
      <td class="text-center">
        <a href="/clients/{{client.id}}/"
            class="link">
          {{client.first_name}}
        </a>
      </td>
      <td class="text-center">
        {{client.profile.identification_number}}
      </td>
      <td class="text-center">
        {{client.profile.passport_number}}
      </td>
      <td class="text-center">
        <span ng-if="client.is_active">Активен</span>
        <span ng-if="!client.is_active">Отключен</span>
      </td>
      <td>
        <a ng-if="!client.is_active"
           class="col-md-12 button btn btn-info text-small"
           ng-click="ctrl.activateClient(client.id)">
          Активировать
        </a>
        <a ng-if="client.is_active"
           class="col-md-12 button btn btn-info text-small"
           ng-click="ctrl.deactivateClient(client.id)">
          Отключить
        </a>
      </td>
    </tr>
  </table>
 </section>
</div>
